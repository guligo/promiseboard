<html>
    <head>
        <title>Promiseboard</title>

        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="description" content="Changing the way we make and keep our promises!" />

        <link rel="stylesheet" href="css/bootstrap-3.3.6/bootstrap.min.css" />
        <link rel="stylesheet" href="css/index.css" />

        <script src="js/jquery-1.11.3/jquery.min.js"></script>
        <script src="js/bootstrap-3.3.6/bootstrap.min.js"></script>
        <script src="js/user-controller.js"></script>
        <script>
            $(document).ready(function() {
                var resetLoginModalFields = function() {
                    $('#loginModalUsernameGroup').removeClass('has-success');
                    $('#loginModalUsernameGroup').removeClass('has-error');
                    $('#loginModalUsernameLabel').text('Username');
                };

                $('#loginModalLoginButton').click(function() {
                    resetLoginModalFields();
                    userController.logIn({
                        username: $('#loginModalUsernameField').val(),
                        password: $('#loginModalPasswordField').val()
                    }, function() {
                        window.location.replace('board.html');
                    }, function() {
                        $('#loginModalUsernameGroup').addClass('has-error');
                        $('#loginModalUsernameLabel').text('Invalid credentials. Please try again!');
                    });
                });

                $('#loginModalCloseButton').click(function() {
                    resetLoginModalFields();
                });

                var resetRegistrationModalFields = function() {
                    $('#registrationModalUsernameGroup').removeClass('has-success');
                    $('#registrationModalUsernameGroup').removeClass('has-error');
                    $('#registrationModalUsernameLabel').text('Username');
                }

                $('#registrationModalRegisterButton').click(function() {
                    resetRegistrationModalFields();
                    userController.register({
                        username: $('#registrationModalUsernameField').val(),
                        password: $('#registrationModalPasswordField').val(),
                        confirm: $('#registrationModalConfirmField').val()
                    }, function() {
                        $('#registrationModalUsernameGroup').addClass('has-success');
                        $('#registrationModalUsernameLabel').text('Registration was successful. Now try to log in!');
                    }, function(text) {
                        $('#registrationModalUsernameGroup').addClass('has-error');
                        $('#registrationModalUsernameLabel').text(text);
                    });
                });

                $('#registrationModalCloseButton').click(function() {
                    resetRegistrationModalFields();
                });
            });
        </script>
    </head>
    <body class="pb-body">
        <div class="container pb-banner">
            <div class="jumbotron pb-jumbotron">
                <h1>Welcome to Promiseboard!</h1>
                <p>We are making a place - an app, to be specific - that would challenge people to commit and keep promises made to themselves and other people. Check it out, you might love it!</p>
                <br />
                <div class="pb-banner-btn-group">
                    <button data-toggle="modal" data-target="#loginModal" type="button" class="btn btn-default btn-lg">
                        <span class="glyphicon glyphicon glyphicon-log-in" aria-hidden="true"></span> Sign in
                    </button>
                    <button data-toggle="modal" data-target="#registrationModal" type="button" class="btn btn-default btn-lg">
                        <span class="glyphicon glyphicon-user" aria-hidden="true"></span> Register
                    </button>
                </div>
            </div>
        </div>

        <div id="loginModal" class="modal fade" role="dialog">
            <div class="modal-dialog pb-modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Sign in</h4>
                    </div>
                    <div class="modal-body">
                        <div id="loginModalUsernameGroup" class="form-group">
                            <label id="loginModalUsernameLabel" class="control-label" for="loginModalUsernameField">Username</label>
                            <input id="loginModalUsernameField" class="form-control" placeholder="Username" />
                        </div>
                        <div class="form-group">
                            <label class="control-label" class="control-label" for="loginModalPasswordField">Password</label>
                            <input id="loginModalPasswordField" type="password" class="form-control" placeholder="Password" />
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="loginModalLoginButton" type="button" class="btn btn-primary">Login</button>
                        <button id="loginModalCloseButton" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="registrationModal" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog pb-modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Registration</h4>
                    </div>
                    <div class="modal-body">
                        <div id="registrationModalUsernameGroup" class="form-group">
                            <label id="registrationModalUsernameLabel" class="control-label" for="registrationModalUsernameField">Username</label>
                            <input id="registrationModalUsernameField" class="form-control" placeholder="Username">
                        </div>
                        <div class="form-group">
                            <label id="registrationModalPasswordLabel" class="control-label" for="registrationModalPasswordField">Password</label>
                            <input id="registrationModalPasswordField" type="password" class="form-control" placeholder="Password" />
                        </div>
                        <div class="form-group">
                            <label id="registrationModalConfirmLabel" class="control-label" for="registrationModalConfirmField">Confirm</label>
                            <input id="registrationModalConfirmField" type="password" class="form-control" placeholder="Repeat password">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="registrationModalRegisterButton" type="button" class="btn btn-primary">Register</button>
                        <button id="registrationModalCloseButton" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-13265754-8', 'auto');
            ga('send', 'pageview');
        </script>
    </body>
</html>
